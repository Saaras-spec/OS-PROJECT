<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>System Summary & Processes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="header" style="display:flex;justify-content:space-between;align-items:center;padding:12px 18px;">
    <div class="brand"><span class="brand-icon">üñ•Ô∏è</span><span class="brand-name">System Summary</span></div>
    <div class="status-wrap" style="display:flex;gap:8px;align-items:center;">
      <div class="status" id="statusChip" aria-live="polite">Status: Connecting...</div>
      <button id="toggleService" class="btn-small">Stop Data</button>
      <a class="btn-small" href="index.html">Home</a>
    </div>
  </header>
  
  <main class="grid" style="padding:18px;">
    <!-- side-by-side row: system summary (left) + two boxes on the right (live plot, heat) -->
    <div class="summary-plot-row" style="display:flex;gap:24px;align-items:flex-start;flex-wrap:nowrap;width:100%;justify-content:space-between;">
      <!-- left: System Summary -->
      <section class="card card-system" aria-label="System Summary" style="flex:0 1 58%; min-width:300px;">
        <h2>System Summary</h2>
        <div class="system-row"><div>GPU Utilization:</div><div id="gpuUtilValue">‚Äî</div></div>
        <div class="system-row"><div>GPU Usage (dedicated):</div><div id="gpuMemValue">‚Äî</div></div>
        <div class="system-row"><div>GPU Shared Memory:</div><div id="gpuSharedMemValue">‚Äî</div></div>
        <div class="system-row"><div>Memory In Use:</div><div id="memUsedValue">‚Äî</div><div id="memPercentValue" style="margin-left:10px;color:var(--muted)">‚Äî</div></div>
        <div class="system-row"><div>Heat Detector (CPU Temp):</div><div id="cpuTempValue">‚Äî</div></div>
        <div class="system-row"><div>Heat Detector (GPU Temp):</div><div id="gpuTempValue">‚Äî</div></div>
      </section>

      <!-- center-right: Live System Plot -->
      <section class="card card-plot" aria-label="Live System Plot" style="flex:0 1 20%; min-width:240px; max-width:360px;">
        <h2>Live System Plot</h2>
        <div style="position:relative;margin-bottom:8px;">
          <canvas id="systemPlot" height="160" aria-label="System summary multi-plot" style="width:100%;height:160px;"></canvas>
          <div id="systemPlotTip" style="position:absolute;display:none;pointer-events:none;background:rgba(0,0,0,0.75);color:#fff;padding:6px 8px;border-radius:6px;font-size:12px;z-index:40;"></div>
        </div>
        <div style="font-size:12px;color:var(--muted);margin-bottom:6px">Legend: <span style="color:#60a5fa;font-weight:700">CPU%</span> / <span style="color:#34d399;font-weight:700">GPU%</span> / <span style="color:#f59e0b;font-weight:700">MEM%</span></div>
      </section>

      <!-- far-right: Heat Detector (separate card) -->
      <section class="card card-heat" aria-label="Heat Detector" style="flex:0 1 20%; min-width:240px; max-width:360px;">
        <h2>Heat Detector</h2>
        <div style="position:relative;">
          <canvas id="heatPlot" height="160" aria-label="CPU and GPU temperature plot" style="width:100%;height:160px;border-radius:6px;display:block;"></canvas>
        </div>
        <div style="font-size:12px;color:var(--muted);margin-top:8px">Legend: <span style="color:#ef4444;font-weight:700">CPU ¬∞C</span> / <span style="color:#f59e0b;font-weight:700">GPU ¬∞C</span></div>
      </section>
    </div>

    <!-- Last update line between summary/plot and processes -->
    <div style="grid-column: 1 / -1; display:flex;justify-content:flex-end;padding:10px 0 0 0;">
      Last update: <span id="lastUpdate" style="margin-left:8px">‚Äî</span>
    </div>

    <!-- Processes card below -->
    <section class="card card-table" aria-label="Processes" style="grid-column: 1 / -1; margin-top:8px;">
      <h2>Processes</h2>
      <table id="processTable" aria-label="Process table" style="width:100%;border-collapse:collapse;">
        <thead><tr><th style="text-align:left;padding:6px">Process</th><th style="padding:6px">CPU%</th><th style="padding:6px">MEM</th><th style="padding:6px">Status</th></tr></thead>
        <tbody id="processBody"></tbody>
      </table>

      <div style="margin-top:12px">
        <div style="display:flex;gap:12px;align-items:center">
          <div>FPS: <strong id="fpsValue">‚Äî</strong></div>
          <div>Latency: <strong id="latencyValue">‚Äî</strong></div>
        </div>
        <div style="margin-top:8px">
          <canvas id="fpsChart" height="100" style="width:100%;height:100px;"></canvas>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer" style="padding:12px 18px">
    <div style="color:var(--muted);font-size:13px">Real-Time Process Monitor</div>
  </footer>

  <script src="dataService.js"></script>
  <script src="theme.js"></script>
  <script src="script_system.js"></script>
</body>
</html>
